{"version":3,"sources":["webpack:///./src/components/profile/EditPersonalInfo.vue?5546","webpack:///src/components/profile/EditPersonalInfo.vue","webpack:///./src/components/profile/EditPersonalInfo.vue?b91d","webpack:///./src/components/profile/EditPersonalInfo.vue?9c3a","webpack:///./src/components/profile/EditPersonalInfo.vue?2542"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","on","setModal","nativeOn","$event","type","indexOf","_k","keyCode","key","preventDefault","saveForm","staticClass","slot","_v","_s","title","hideModal","formFields","length","staticStyle","_l","field","index","viewable","_e","required","$t","name","scopedSlots","_u","fn","validationContext","options","getValidationState","model","value","callback","$$v","$set","trim","expression","userEditable","errors","items","_g","description","updateField","$listeners","$root","userStore","state","internalUser","staticRenderFns","mixins","ResourceMixin","components","FrListField","props","schema","profile","autoOpen","default","data","originalFormFields","mounted","methods","generateFormFields","filteredOrder","_","properties","policyFields","idmInstance","policyResult","detail","failedPolicyRequirements","tempDisplayErrors","newValue","PopulateSelectList","property","selectList","text","component"],"mappings":"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","file":"js/chunk-2c3857e2.b4fb317d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-modal',{ref:\"fsModal\",attrs:{\"id\":\"userDetailsModal\",\"modal-class\":\"fr-full-screen\",\"cancel-variant\":\"outline-secondary\"},on:{\"show\":_vm.setModal},nativeOn:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.saveForm($event)}}},[_c('div',{staticClass:\"d-flex w-100 h-100\",attrs:{\"slot\":\"modal-header\"},slot:\"modal-header\"},[_c('h5',{staticClass:\"modal-title align-self-center text-center\"},[_vm._v(_vm._s(_vm.title))]),_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"aria-label\":\"Close\"},on:{\"click\":_vm.hideModal}},[_c('i',{staticClass:\"fa fa-times\"})])]),_c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"8\",\"offset-sm\":\"2\"}},[_c('ValidationObserver',{ref:\"observer\",attrs:{\"slim\":\"\"}},[(_vm.formFields.length > 0)?_c('b-form',{staticClass:\"mb-3 fr-edit-personal-form\",staticStyle:{\"flex-direction\":\"column\"},attrs:{\"name\":\"edit-personal-form\"}},[_vm._l((_vm.formFields),function(field,index){return [((field.type === 'string' || field.type === 'number') && field.viewable)?_c('b-form-group',{key:index,staticStyle:{\"min-width\":\"200px\"}},[_c('label',{attrs:{\"for\":field.title}},[_vm._v(_vm._s(field.title))]),(!field.required)?_c('small',{staticClass:\"text-muted ml-1\"},[_vm._v(_vm._s(_vm.$t('pages.profile.editProfile.optional')))]):_vm._e(),_c('ValidationProvider',{attrs:{\"rules\":(\"\" + (field.required ? 'required' : '')),\"name\":field.name},scopedSlots:_vm._u([{key:\"default\",fn:function(validationContext){return [(field.options.length)?_c('b-select',{attrs:{\"name\":field.name,\"state\":_vm.getValidationState(validationContext),\"options\":field.options},model:{value:(_vm.formFields[index].value),callback:function ($$v) {_vm.$set(_vm.formFields[index], \"value\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formFields[index].value\"}}):_c('b-input',{attrs:{\"disabled\":!field.userEditable,\"name\":field.name,\"type\":field.type === 'string' ? 'text' : field.type,\"state\":_vm.getValidationState(validationContext)},model:{value:(_vm.formFields[index].value),callback:function ($$v) {_vm.$set(_vm.formFields[index], \"value\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"formFields[index].value\"}}),_c('b-form-invalid-feedback',[_vm._v(_vm._s(validationContext.errors[0]))])]}}],null,true)})],1):_vm._e(),(field.type === 'boolean')?_c('b-form-group',{key:index},[(field.viewable)?_c('div',{staticClass:\"d-flex flex-column\"},[_c('label',{staticClass:\"mr-auto\",attrs:{\"for\":field.title}},[_vm._v(_vm._s(field.title)),(!field.required)?_c('small',{staticClass:\"text-muted ml-1\"},[_vm._v(_vm._s(_vm.$t('pages.profile.editProfile.optional')))]):_vm._e()]),_c('b-form-checkbox',{staticClass:\"fr-toggle-primary\",attrs:{\"switch\":\"\",\"size\":\"lg\",\"disabled\":!field.userEditable},model:{value:(_vm.formFields[index].value),callback:function ($$v) {_vm.$set(_vm.formFields[index], \"value\", $$v)},expression:\"formFields[index].value\"}},[_vm._v(\" \"+_vm._s(_vm.formFields[index].value ? _vm.$t('common.form.yes') : _vm.$t('common.form.no'))+\" \")])],1):_vm._e()]):_vm._e(),(field.type === 'array' && field.items.type !== 'relationship')?_c('b-form-group',{key:index},[(field.viewable)?_c('div',{staticClass:\"d-flex flex-column\"},[_c('label',{staticClass:\"mr-auto\",attrs:{\"for\":field.title}},[_vm._v(_vm._s(field.title)+\" \"),(!field.required)?_c('small',{staticClass:\"text-muted ml-1\"},[_vm._v(_vm._s(_vm.$t('pages.profile.editProfile.optional')))]):_vm._e()]),_c('FrListField',_vm._g({attrs:{\"value\":_vm.formFields[index].value,\"description\":field.description,\"items\":field.items,\"label\":field.title,\"name\":field.name,\"required\":field.required,\"index\":index,\"disabled\":!field.userEditable},on:{\"input\":function($event){return _vm.updateField(index, $event)}}},_vm.$listeners))],1):_vm._e()]):_vm._e()]})],2):[_c('h3',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm.$t('pages.profile.editProfile.noFields')))])]],2)],1)],1)],1),_c('div',{staticClass:\"w-100\",attrs:{\"slot\":\"modal-footer\"},slot:\"modal-footer\"},[_c('div',{staticClass:\"float-right\"},[_c('b-btn',{attrs:{\"variant\":\"outline-secondary mr-2\"},on:{\"click\":_vm.hideModal}},[_vm._v(_vm._s(_vm.$t('common.form.cancel')))]),_c('b-btn',{attrs:{\"type\":\"button\",\"variant\":\"primary\",\"disabled\":_vm.$root.userStore.state.internalUser},on:{\"click\":_vm.saveForm}},[_vm._v(_vm._s(_vm.$t('common.form.saveChanges')))])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\nCopyright (c) 2020-2023 ForgeRock. All rights reserved.\n\nThis software may be modified and distributed under the terms\nof the MIT license. See the LICENSE file for details.\n-->\n\n<template>\n    <b-modal id=\"userDetailsModal\" modal-class=\"fr-full-screen\" ref=\"fsModal\" cancel-variant=\"outline-secondary\" @show=\"setModal\" @keydown.enter.native.prevent=\"saveForm\">\n\n        <div slot=\"modal-header\" class=\"d-flex w-100 h-100\">\n            <h5 class=\"modal-title align-self-center text-center\">{{title}}</h5>\n            <button type=\"button\" aria-label=\"Close\" class=\"close\" @click=\"hideModal\"><i class=\"fa fa-times\"></i></button>\n        </div>\n        <!-- Editing profile currently only supports String, Number and Boolean-->\n        <b-container>\n            <b-row>\n                <b-col sm=\"8\" offset-sm=\"2\">\n                    <ValidationObserver ref=\"observer\" slim>\n                        <b-form style=\"flex-direction: column;\" v-if=\"formFields.length > 0\" class=\"mb-3 fr-edit-personal-form\" name=\"edit-personal-form\">\n                        <template v-for=\"(field, index) in formFields\">\n                                <b-form-group style=\"min-width: 200px;\" :key=\"index\" v-if=\"(field.type === 'string' || field.type === 'number') && field.viewable\">\n                                    <label :for=\"field.title\">{{field.title}}</label>\n                                    <small v-if=\"!field.required\" class=\"text-muted ml-1\">{{$t('pages.profile.editProfile.optional')}}</small>\n                                    <ValidationProvider :rules=\"`${field.required ? 'required' : ''}`\"  :name=\"field.name\" v-slot=\"validationContext\">\n                                        <b-select\n                                            v-if=\"field.options.length\"\n                                            :name=\"field.name\"\n                                            :state=\"getValidationState(validationContext)\"\n                                            :options=\"field.options\"\n                                            v-model.trim=\"formFields[index].value\"/>\n                                        <b-input\n                                            v-else\n                                            :disabled=\"!field.userEditable\"\n                                            :name=\"field.name\"\n                                            :type=\"field.type === 'string' ? 'text' : field.type\"\n                                            :state=\"getValidationState(validationContext)\"\n                                            v-model.trim=\"formFields[index].value\" />\n                                        <b-form-invalid-feedback>{{ validationContext.errors[0] }}</b-form-invalid-feedback>\n                                    </ValidationProvider>\n                                </b-form-group>\n\n                                <!-- for boolean values -->\n                                <b-form-group :key=\"index\" v-if=\"field.type === 'boolean'\">\n                                    <div v-if=\"field.viewable\" class=\"d-flex flex-column\">\n                                        <label class=\"mr-auto\" :for=\"field.title\">{{field.title}}<small v-if=\"!field.required\" class=\"text-muted ml-1\">{{$t('pages.profile.editProfile.optional')}}</small></label>\n                                        <b-form-checkbox\n                                            switch\n                                            size=\"lg\"\n                                            class=\"fr-toggle-primary\"\n                                            :disabled=\"!field.userEditable\"\n                                            v-model=\"formFields[index].value\">\n                                            {{ formFields[index].value ? $t('common.form.yes') : $t('common.form.no') }}\n                                        </b-form-checkbox>\n                                    </div>\n                                </b-form-group>\n\n                                <!-- for array values -->\n                                    <b-form-group :key=\"index\" v-if=\"field.type === 'array' && field.items.type !== 'relationship'\">\n                                        <div v-if=\"field.viewable\" class=\"d-flex flex-column\">\n                                            <label class=\"mr-auto\" :for=\"field.title\">{{ field.title }}\n                                                <small v-if=\"!field.required\" class=\"text-muted ml-1\">{{ $t('pages.profile.editProfile.optional') }}</small>\n                                            </label>\n                                            <FrListField\n                                                :value=\"formFields[index].value\"\n                                                :description=\"field.description\"\n                                                :items=\"field.items\"\n                                                :label=\"field.title\"\n                                                :name=\"field.name\"\n                                                :required=\"field.required\"\n                                                :index=\"index\"\n                                                :disabled=\"!field.userEditable\"\n                                                v-on=\"$listeners\"\n                                                @input=\"updateField(index, $event)\" />\n                                        </div>\n                                    </b-form-group>\n                            </template>\n                        </b-form>\n                        <template v-else>\n                            <h3 class=\"text-center\">{{$t('pages.profile.editProfile.noFields')}}</h3>\n                        </template>\n                    </ValidationObserver>\n                </b-col>\n            </b-row>\n        </b-container>\n\n        <div slot=\"modal-footer\" class=\"w-100\">\n            <div class=\"float-right\">\n                <b-btn variant=\"outline-secondary mr-2\" @click=\"hideModal\">{{$t('common.form.cancel')}}</b-btn>\n                <b-btn type=\"button\" variant=\"primary\" :disabled=\"$root.userStore.state.internalUser\" @click=\"saveForm\">{{$t('common.form.saveChanges')}}</b-btn>\n            </div>\n        </div>\n    </b-modal>\n</template>\n\n<script>\nimport _ from 'lodash';\nimport FrListField from '@/components/utils/ListField';\nimport ResourceMixin from '@/components/utils/mixins/ResourceMixin';\n\n/**\n * @description Displays a users profile, auto generates fields based off of resource schema. Currently only displays strings, numbers and booleans. In the case of a policy\n * save error it will highlight the appropriate field and display a policy error. For custom profile changes (e.g. adding a dropdown) this would be the primary file to add these\n * adjustments.\n *\n */\nexport default {\n    name: 'Edit-Personal-Info',\n    mixins: [\n        ResourceMixin\n    ],\n    components: {\n        FrListField\n    },\n    props: {\n        schema: { type: Object, required: true },\n        profile: { type: Object, required: true },\n        autoOpen: { type: Boolean, required: false, default: false }\n    },\n    data () {\n        return {\n            formFields: [],\n            originalFormFields: [],\n            title: this.$t('pages.profile.editProfile.userDetailsTitle')\n        };\n    },\n    mounted () {\n        if (this.autoOpen) {\n            this.$root.$emit('bv::show::modal', 'userDetailsModal');\n        }\n    },\n    methods: {\n        generateFormFields () {\n            let { order, properties, required } = this.schema,\n                filteredOrder = _.filter(order, (propName) => {\n                    return properties[propName].viewable &&\n                        properties[propName].type !== 'object';\n                }),\n                formFields = _.map(filteredOrder, (name) => {\n                    return {\n                        name: name,\n                        key: name,\n                        title: properties[name].title,\n                        userEditable: properties[name].userEditable,\n                        viewable: properties[name].viewable,\n                        value: this.profile[name] || null,\n                        type: properties[name].type,\n                        required: _.includes(required, name),\n                        items: properties[name].items,\n                        options: this.PopulateSelectList(properties[name])\n                    };\n                });\n\n            return formFields;\n        },\n        hideModal () {\n            this.$refs.fsModal.hide();\n        },\n        setModal () {\n            let formFields = this.generateFormFields();\n\n            this.formFields = formFields;\n            this.originalFormFields = _.cloneDeep(formFields);\n        },\n        saveForm () {\n            /* istanbul ignore next */\n            this.$refs.observer.validate().then((valid) => {\n                if (valid) {\n                    const idmInstance = this.getRequestService();\n                    let policyFields = {};\n\n                    _.each(this.formFields, (field) => {\n                        if (field.value !== null) {\n                            policyFields[field.name] = field.value;\n                        }\n                    });\n\n                    idmInstance.post(`policy/${this.$root.userStore.state.managedResource}/${this.$root.userStore.state.userId}?_action=validateObject`, policyFields).then((policyResult) => {\n                        // reject any failedPolicyRequirements on properties that don't exist in this.formFields\n                        policyResult.data.failedPolicyRequirements = _.remove(policyResult.data.failedPolicyRequirements, (policy) => !_.map(this.formFields, 'name').includes(policy.property));\n\n                        if (policyResult.data.failedPolicyRequirements.length === 0) {\n                            // remove empty array values when the original value is null as this causes incorrect patches to be created\n                            let cleanFormFields = _.map(_.cloneDeep(this.formFields), (field, index) => {\n                                if (field.type === 'array' && field.value) {\n                                    if (this.originalFormFields[index].value === null && field.value.length === 0) {\n                                        field.value = null;\n                                    }\n                                }\n                                return field;\n                            });\n                            this.$emit('updateProfile', this.generateUpdatePatch(this.originalFormFields, cleanFormFields));\n                            this.$refs.observer.reset();\n                            this.hideModal();\n                        } else {\n                            let generatedErrors = this.findPolicyError({\n                                data: {\n                                    detail: {\n                                        failedPolicyRequirements: policyResult.data.failedPolicyRequirements\n                                    }\n                                }\n                            }, this.formFields);\n\n                            if (generatedErrors.length > 0) {\n                                let tempDisplayErrors = {};\n\n                                _.each(generatedErrors, (generatedError) => {\n                                    if (generatedError.exists) {\n                                        if (tempDisplayErrors[generatedError.field] !== undefined) {\n                                            tempDisplayErrors[generatedError.field].push(generatedError.msg);\n                                        } else {\n                                            tempDisplayErrors[generatedError.field] = [generatedError.msg];\n                                        }\n                                    }\n                                });\n                                this.$refs.observer.setErrors(tempDisplayErrors);\n                            } else {\n                                this.displayNotification('error', this.$t('pages.profile.editProfile.failedProfileSave'));\n                            }\n                        }\n                    });\n                }\n            });\n        },\n        /**\n         * Update form data model with a new value. Used for editing a list field\n         *\n         * @param {Number} index index of form field\n         * @param {Array} newValue new value of form field\n         */\n        updateField (index, newValue) {\n            this.formFields[index].value = newValue;\n            this.$forceUpdate();\n        },\n        /** @param { object } property Data from IDM managed user object schema\n         * @return { Array<{ text: string, value: string }>} Data to render a select list\n        */\n        PopulateSelectList (property) {\n            let selectList = [];\n            if (property.enum && property.enum.length) {\n                selectList = _.map(property.enum, (value, index) => {\n                    // if no enum_titles are provided, 'value' will be substituted\n                    return {\n                        text: property.options && property.options.enum_titles\n                            ? property.options.enum_titles[index] : value,\n                        value: value\n                    };\n                });\n            }\n\n            return selectList;\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\">\n    @import '../../scss/full-screen-modal';\n\n    _:-ms-fullscreen, :root {\n        #userDetailsModal {\n            .row {\n                min-width: 900px;\n            }\n            .fr-edit-personal-form {\n                min-width: 900px;\n            }\n        }\n    }\n\n    @media only screen and (max-width: 700px) {\n        _:-ms-fullscreen, :root {\n            #userDetailsModal {\n                .row {\n                    min-width: 200px;\n                }\n                .fr-edit-personal-form {\n                    min-width: 200px;\n                }\n            }\n        }\n\n    }\n\n    .form-control:disabled, .b-form-tags.disabled {\n        background-color: $gray-100;\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonalInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonalInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPersonalInfo.vue?vue&type=template&id=48f291e2&\"\nimport script from \"./EditPersonalInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPersonalInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditPersonalInfo.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPersonalInfo.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}